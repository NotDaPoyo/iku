{% extends 'base.html' %}
{% block content %}
{% load static %}

<div id="container" class="container">
    <div class="d-flex flex-row align-items-center">
        <img height="50vh" class="p-2" src="{% static 'iku-stripes.png' %}">
        <h1>Iku Music Player</h1>
        <div id="profile">
            <h4>
                {% if user.is_authenticated %}
                <p>Welcome, {{ user }}!</p>
                {% else %}
                <a href="login">Login here!</a>
                {% endif %}
            </h4>
        </div>
    </div>
    <div class="d-flex flex-row h-fill w-fill">
    <div class="p-2 py-1 w-25 h-100 bg-dark text-white">
        <h1 class="underline">Play.list</h1>
        <div class="border border-light h-75 p-2">
            <h2>Playlist</h2>
            <h4>Now playing: {{ selected_song.name }}</h4>
            <div>
                {% for song in playlist %}
                <div class="d-inline">
                    <h3 class="d-inline">- {{ song.name }}     </h3><h6 class="d-inline">< {{song.author}} ></h6>
                </div>
                {% endfor %}
            </div>
        </div>
        <div id="player" class="border border-light w-100 d-flex">
            
            <audio>
                
              Your browser does not support the audio element.
            </audio>
            <audio id="track">
                <source src="{{song_location.url}}" type="audio/mpeg">
            </audio>
              
            <div id="player-container">
                <div id="play-pause" class="play">Play</div>
            <input type="checkbox" id="checkbox"></input>
            </div>
        </div>
    </div>
    <div class="w-100">
        <div class="p-3 py-1 w-100 h-75 background-green">
            <h1 class="underline">Song.List</h1>
            <div>
                {% for song in songs %}
                    <div class="bg-success3">
                        <a id="audio-link" href="../home/{{ song.id }}">- <h3 class="d-inline">{{ song.name }}</h3></a><h6 class="d-inline">     < {{song.author}} ></h6>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="w-100 h-25 p-5">
            <h1>Made with love by Poyo!</h1>
            <h3>With the help of: <a href="https://thesomething.uk/">Jesus</a>,</h3>
        </div>
    </div>
    
</div>

<script>
    var track = document.getElementById('track');

var controlBtn = document.getElementById('play-pause');

function playPause() {
    if (track.paused) {
        track.play();
        //controlBtn.textContent = "Pause";
        controlBtn.className = "pause";
    } else { 
        track.pause();
         //controlBtn.textContent = "Play";
        controlBtn.className = "play";
    }
}

controlBtn.addEventListener("click", playPause);
track.addEventListener("ended", function() {
  controlBtn.className = "play";
});

volumeControl.oninput = function () {
    console.log(volumeControl.value);
    gainMod.gain.value = parseFloat(volumeControl.value);
};
document.querySelector('#checkbox').oninput = function(){
  track.loop = document.querySelector('#checkbox').checked;
}
</script>
{% endblock content %}